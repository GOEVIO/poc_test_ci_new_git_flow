import { DbClient } from 'evio-library-connections'
import { CollectionNames, DBNames } from 'evio-library-commons'

interface IRabbitConfigs {
    retryAttempts: number;
    readingSimultaneously: number;
    queueName: string;
    deadLetterExchange?: string;
    deadQueue?: string;
}

export const retrieveRabbitConfig =
    async (queueName: string): Promise<IRabbitConfigs> => {
        const connConfig = DbClient.getInstance(DBNames.Configs);
        try {
            const config = await connConfig.findOne(CollectionNames.Configs.rabbitMQConfigs, { queueName }) as IRabbitConfigs;
            return config;
        } catch (error) {
            throw error
        }
    }
